{"version":3,"sources":["turbopack:///[project]/src/components/Console.module.css [app-ssr] (css module)","../../../../src/components/Console.tsx","turbopack:///[project]/src/app/scenario/[id]/Scenario.module.css [app-ssr] (css module)","../../../../src/app/campaigns/%5Bid%5D/page.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"blink\": \"Console-module__pqP0ea__blink\",\n  \"content\": \"Console-module__pqP0ea__content\",\n  \"cursor\": \"Console-module__pqP0ea__cursor\",\n  \"dot\": \"Console-module__pqP0ea__dot\",\n  \"header\": \"Console-module__pqP0ea__header\",\n  \"line\": \"Console-module__pqP0ea__line\",\n  \"prompt\": \"Console-module__pqP0ea__prompt\",\n  \"terminal\": \"Console-module__pqP0ea__terminal\",\n  \"title\": \"Console-module__pqP0ea__title\",\n});\n","'use client';\n\nimport { useEffect, useRef } from 'react';\nimport styles from './Console.module.css';\n\ninterface ConsoleProps {\n    logs: string[];\n    isRunning: boolean;\n}\n\nexport default function Console({ logs, isRunning }: ConsoleProps) {\n    const bottomRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        bottomRef.current?.scrollIntoView({ behavior: 'smooth' });\n    }, [logs]);\n\n    return (\n        <div className={styles.terminal}>\n            <div className={styles.header}>\n                <span className={styles.dot} style={{ background: '#ff5f56' }}></span>\n                <span className={styles.dot} style={{ background: '#ffbd2e' }}></span>\n                <span className={styles.dot} style={{ background: '#27c93f' }}></span>\n                <span className={styles.title}>root@kali:~/scenarios</span>\n            </div>\n            <div className={styles.content}>\n                {logs.map((log, i) => (\n                    <div key={i} className={styles.line}>\n                        <span className={styles.prompt}>$ </span>\n                        {log}\n                    </div>\n                ))}\n                {isRunning && (\n                    <div className={styles.line}>\n                        <span className={`${styles.cursor} mono`}>_</span>\n                    </div>\n                )}\n                <div ref={bottomRef} />\n            </div>\n        </div>\n    );\n}\n","__turbopack_context__.v({\n  \"backLink\": \"Scenario-module__OWz1pW__backLink\",\n  \"container\": \"Scenario-module__OWz1pW__container\",\n  \"controls\": \"Scenario-module__OWz1pW__controls\",\n  \"header\": \"Scenario-module__OWz1pW__header\",\n  \"meta\": \"Scenario-module__OWz1pW__meta\",\n  \"mitreSection\": \"Scenario-module__OWz1pW__mitreSection\",\n  \"title\": \"Scenario-module__OWz1pW__title\",\n});\n","'use client';\n\nimport { useState, use, useEffect } from 'react';\nimport Link from 'next/link';\nimport { notFound } from 'next/navigation';\nimport { CAMPAIGNS, SCENARIOS, Scenario } from '@/lib/types';\nimport Console from '@/components/Console';\nimport styles from '@/app/scenario/[id]/Scenario.module.css'; // Reusing scenario styles\n\nexport default function CampaignDetailPage({ params }: { params: Promise<{ id: string }> }) {\n    const { id } = use(params);\n    const campaign = CAMPAIGNS.find((c) => c.id === id);\n\n    const [isRunning, setIsRunning] = useState(false);\n    const [currentStepIndex, setCurrentStepIndex] = useState(-1);\n    const [logs, setLogs] = useState<string[]>([]);\n\n    if (!campaign) notFound();\n\n    const handleExecute = async () => {\n        setIsRunning(true);\n        setCurrentStepIndex(0);\n        setLogs([]);\n\n        // Get Config\n        const c2Host = localStorage.getItem('c2_host');\n        const targetIp = localStorage.getItem('target_ip');\n\n        setLogs(p => [...p, `[INFO] Initializing Campaign: ${campaign.name}`, `[INFO] Target: ${targetIp}`, `[INFO] C2: ${c2Host}`]);\n\n        // Sequential Execution\n        for (let i = 0; i < campaign.steps.length; i++) {\n            const stepId = campaign.steps[i];\n            const scenario = SCENARIOS.find(s => s.id === stepId);\n\n            if (!scenario) {\n                setLogs(p => [...p, `[ERROR] Scenario ID ${stepId} not found. Skipping.`]);\n                continue;\n            }\n\n            setCurrentStepIndex(i);\n            setLogs(p => [...p, `\\n[*] STEP ${i + 1}/${campaign.steps.length}: ${scenario.name} (${scenario.mitreTechniques[0].id})...`]);\n\n            try {\n                const response = await fetch('/api/execute', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        scriptPath: scenario.scriptPath,\n                        c2Host: c2Host,\n                        targetIp: targetIp\n                    }),\n                });\n\n                const data = await response.json();\n\n                if (data.success) {\n                    const lines = data.output.split('\\n').filter((l: string) => l);\n                    setLogs(prev => [...prev, ...lines]);\n                } else {\n                    setLogs(prev => [...prev, `[ERROR] ${data.error}`]);\n                }\n            } catch (e) {\n                setLogs(prev => [...prev, `[ERROR] API Failure: ${e}`]);\n            }\n\n            // Small delay between steps for realism\n            await new Promise(r => setTimeout(r, 2000));\n        }\n\n        setLogs(p => [...p, `\\n[+] Campaign Execution Completed.`]);\n        setIsRunning(false);\n        setCurrentStepIndex(-1);\n    };\n\n    return (\n        <main className={styles.container} style={{ animation: 'fadeIn 0.3s ease' }}>\n            <Link href=\"/campaigns\" className={styles.backLink}>‚Üê Back to Campaigns</Link>\n\n            <header className={styles.header}>\n                <div className={styles.meta}>\n                    <span className=\"badge\" style={{ color: 'var(--warning)', borderColor: 'var(--warning)' }}>[{campaign.adversary}]</span>\n                    <span className=\"mono text-dim\">{campaign.steps.length} PHASES</span>\n                </div>\n                <h1 className=\"mono text-primary glow-text\" style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>{campaign.name}</h1>\n                <p className=\"text-dim\">{campaign.description}</p>\n            </header>\n\n            <section className=\"section-card\" style={{ marginBottom: '2rem' }}>\n                <h3>CAMPAIGN OPERATIONS CHAIN</h3>\n                <div style={{ display: 'grid', gap: '0.5rem' }}>\n                    {campaign.steps.map((stepId, index) => {\n                        const s = SCENARIOS.find(x => x.id === stepId);\n                        const isActive = index === currentStepIndex;\n                        const isDone = index < currentStepIndex || (currentStepIndex === -1 && logs.length > 0 && isRunning === false);\n\n                        return (\n                            <div key={index} className={`accent-item ${isActive ? 'active' : ''}`}\n                                style={{\n                                    borderLeftColor: isDone ? '#ff6b35' : isActive ? 'var(--primary)' : 'var(--border)',\n                                    opacity: (isRunning && !isActive && !isDone) ? 0.5 : 1\n                                }}>\n                                <span className=\"mono text-dim\" style={{ marginRight: '1rem' }}>{index + 1}.</span>\n                                <span className=\"mono\" style={{ color: isActive ? 'var(--primary)' : 'var(--text-main)' }}>\n                                    {s?.name || stepId}\n                                </span>\n                                {isDone && <span className=\"tag\" style={{ float: 'right', background: 'rgba(255, 107, 53, 0.2)', color: '#ff6b35', borderColor: '#ff6b35' }}>COMPLETED</span>}\n                                {isActive && <span className=\"tag\" style={{ float: 'right' }}>EXECUTING</span>}\n                            </div>\n                        );\n                    })}\n                </div>\n            </section>\n\n            <div className={styles.controls}>\n                <button\n                    className=\"btn\"\n                    onClick={handleExecute}\n                    disabled={isRunning}\n                    style={{ opacity: isRunning ? 0.5 : 1 }}\n                >\n                    {isRunning ? 'CAMPAIGN IN PROGRESS...' : 'EXECUTE CAMPAIGN'}\n                </button>\n            </div>\n\n            <Console logs={logs} isRunning={isRunning} />\n        </main>\n    );\n}\n\n"],"names":[],"mappings":"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"}